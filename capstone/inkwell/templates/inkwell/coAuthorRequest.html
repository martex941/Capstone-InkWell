{% extends "inkwell/layout.html" %}

{% block body %}
<script>
    // Function to highlight added content
    function highlightAddedContent() {
        var originalText = document.getElementById("originalText").innerText;
        var modifiedText = document.getElementById("modifiedText").innerText;
        var deletedText = document.getElementById("whatWasDeleted").innerText;

        var result = "";
        
        for (var i = 0; i < modifiedText.length; i++) {
            if (modifiedText[i] !== originalText[i]) {
                result += '<span class="added">' + modifiedText[i] + '</span>';
            }
            else {
                result += modifiedText[i];
            }
        }
        document.getElementById("modifiedText").innerHTML = result;

        var deletedHighlight = "";
        for (var i = 0; i < deletedText.length; i++) {
            if (deletedText[i] !== modifiedText[i]) {
                deletedHighlight += '<span class="deleted">' + deletedText[i] + '</span>';
            }
            else {
                deletedHighlight += deletedText[i];
            }
        }
        document.getElementById("whatWasDeleted").innerHTML = deletedHighlight;
    }

    document.addEventListener("DOMContentLoaded", () => {
        // Call the function to highlight added content
        highlightAddedContent();
    });
    
</script>

<style>
    .added {
        background-color: #aaffaa;  /* Light green */
    }
    
    .deleted {
            background-color: #ffaaaa;  /* Light red */
    }
    
</style>

<div class="container">
    <div id="originalText">
        <!-- Your original text here -->
        {{originalChapter.chapterContents.html|safe}}
    </div>
    <div id="modifiedText">
        <!-- Your modified text here -->
        {{newChapterContent.chapterContents.html|safe}}
    </div>
    <div id="whatWasDeleted">
        {{originalChapter.chapterContents.html|safe}}
    </div>

    
</div>
{% endblock %}